<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Files and Folders | TYPO3 - Better API by LABOR.digital</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.8f41657d.js" as="script"><link rel="preload" href="/assets/js/2.d8f93aa7.js" as="script"><link rel="preload" href="/assets/js/9.99f5edda.js" as="script"><link rel="prefetch" href="/assets/js/3.bc99a622.js"><link rel="prefetch" href="/assets/js/4.ba3164ba.js"><link rel="prefetch" href="/assets/js/5.75a3592b.js"><link rel="prefetch" href="/assets/js/6.0377ba0c.js"><link rel="prefetch" href="/assets/js/7.55a3f984.js"><link rel="prefetch" href="/assets/js/8.7e7c8f31.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">TYPO3 - Better API by LABOR.digital</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">TYPO3 - Better API</a></li><li><a href="/guide/FilesAndFolders.html" aria-current="page" class="active sidebar-link">Files and Folders</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#fal-file-service" class="sidebar-link">FAL File Service</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfile" class="sidebar-link">getFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfilereference" class="sidebar-link">getFileReference()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#addfilereference" class="sidebar-link">addFileReference()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#addfile" class="sidebar-link">addFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#adduploadedfile" class="sidebar-link">addUploadedFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfileinfo" class="sidebar-link">getFileInfo()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfileurl" class="sidebar-link">getFileUrl()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getresizedimage" class="sidebar-link">getResizedImage()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getresizedimageurl" class="sidebar-link">getResizedImageUrl()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#hasfolder" class="sidebar-link">hasFolder()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfolder" class="sidebar-link">getFolder()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#mkfolder" class="sidebar-link">mkFolder()</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#file-info" class="sidebar-link">File Info</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#isfilereference" class="sidebar-link">isFileReference()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#isprocessed" class="sidebar-link">isProcessed()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getuid" class="sidebar-link">getUid()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfilereferenceuid" class="sidebar-link">getFileReferenceUid()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfileuid" class="sidebar-link">getFileUid()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#gethash" class="sidebar-link">getHash()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfilename" class="sidebar-link">getFileName()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#geturl" class="sidebar-link">getUrl()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getoriginalurl" class="sidebar-link">getOriginalUrl()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getmimetype" class="sidebar-link">getMimeType()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getsize" class="sidebar-link">getSize()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getextension" class="sidebar-link">getExtension()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#gettype" class="sidebar-link">getType()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#isimage" class="sidebar-link">isImage()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#isvideo" class="sidebar-link">isVideo()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfilereference-2" class="sidebar-link">getFileReference()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getprocessedfile" class="sidebar-link">getProcessedFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getvideoinfo" class="sidebar-link">getVideoInfo()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getimageinfo" class="sidebar-link">getImageInfo()</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#varfs" class="sidebar-link">VarFs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#hasfile" class="sidebar-link">hasFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfile-2" class="sidebar-link">getFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getfilecontent" class="sidebar-link">getFileContent()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#setfilecontent" class="sidebar-link">setFileContent()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#includefile" class="sidebar-link">includeFile()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#getbasedirectorypath" class="sidebar-link">getBaseDirectoryPath()</a></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#flush" class="sidebar-link">flush()</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#permissions" class="sidebar-link">Permissions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/FilesAndFolders.html#setfilepermissions" class="sidebar-link">setFilePermissions()</a></li></ul></li></ul></li><li><a href="/guide/CoreModification.html" class="sidebar-link">Core Modification</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="files-and-folders"><a href="#files-and-folders" class="header-anchor">#</a> Files and Folders</h1> <p>Most of the heavy lifting for handling files in your TYPO3 installation is done by the core itself using the FAL for example. To make working with files more
convenient, BetterApi gives you some additional tools to work with files inside the FAL and when working with local files on the hard drive.</p> <h2 id="fal-file-service"><a href="#fal-file-service" class="header-anchor">#</a> FAL File Service</h2> <p><code>LaborDigital\Typo3BetterApi\FileAndFolder\FalFileService</code></p> <p>The FAL file service provides you a bunch of pre-build methods to work with the FAL programmatically. It handles tasks like creating folders, uploading files,
retrieving files, creating new file references as well as providing you detailed file informations using the <a href="#file-info">FileInfo</a> objects</p> <h3 id="getfile"><a href="#getfile" class="header-anchor">#</a> getFile()</h3> <p>This method has two modes of operation.</p> <ol><li>The first one is by only supplying a $uid. This uid should be a valid uid of a row in &quot;sys_file&quot;
The result will be either null or an object of type &quot;File&quot;</li> <li>The second mode is by supplying a $uid, $table, and $field. This will now search the <code>sys_file_references</code> table matching the given criteria. The result
will be either null, an array of FileReference objects or a single FileReference object depending on the $onlyFirst parameter.</li></ol> <div class="custom-block tip"><p class="custom-block-title">$uid can also be given as &quot;query,&quot; which is the case when you are using a typolink field in the TCA.</p></div> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$uid Either a sys_file | uid or a uid of the record using as reference
<ul><li>NULL To select all references of with the matching $table and $field</li> <li>The $uid field alone can handle all possible inputs like the following as well.
<ul><li>&quot;2:myfolder/myfile.jpg&quot; (combined identifier)</li> <li>&quot;23&quot; (file UID)</li> <li>&quot;uploads/myfile.png&quot; (backwards-compatibility, storage &quot;0&quot;)</li> <li>&quot;file:23&quot;
:::</li></ul></li></ul></li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve a sys_file by uid</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve the first sys_file_reference for a record with uid 12 on tt_content</span>
<span class="token variable">$fileReference</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'tt_content'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'media'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve ALL references for a record with uid 12 on tt_content</span>
<span class="token variable">$fileReferences</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'tt_content'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'media'</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// You can also use fal identifiers</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'2:myfolder/myfile.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="getfilereference"><a href="#getfilereference" class="header-anchor">#</a> getFileReference()</h3> <p>Similar to getFile() as it finds a file object in the FAL. However, this will solely search for file references and requires a numeric id for a reference to
find in the database.</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$uid The uid of the reference in the sys_file_reference table</li></ul></details></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>TypoContainer</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>FalFileService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve a sys_file_reference by uid</span>
<span class="token variable">$fileReference</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFileReference</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="addfilereference"><a href="#addfilereference" class="header-anchor">#</a> addFileReference()</h3> <p>This method creates a new file reference. It expects to receive a FAL file instance and some metadata to create the mapping on an external field.</p> <div class="custom-block warning"><p class="custom-block-title">There will be no permission checks when creating the reference!</p></div> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$file The main file to create the reference for</li> <li>$uid The uid of the record that should display the linked file</li> <li>$field The field of the record that should be linked with this file</li> <li>$table The table of the record that should be linked with this file</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a new reference for &quot;media&quot; on a page</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">addFileReference</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;media&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;pages&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="addfile"><a href="#addfile" class="header-anchor">#</a> addFile()</h3> <p>Adds a file on your local file system to the FAL file system.</p> <div class="custom-block warning"><p class="custom-block-title">The file given as $fileSystemPath will be moved to the FAL directory, not copied!</p></div> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$fileSystemPath The real path to the file to import. Should always be a FILE, not a FOLDER!</li> <li>$falPath Defines where to put the file in the FAL file system. Nonexisting directories will auto-created, the default file storage is 1(fileadmin). If the
falPath ends with a slash &quot;/&quot;, the filename will be taken from $fileSystemPath. If the falPath NOT ends with a slash, the filename is extracted from it</li> <li>$onDuplication The behaviour on file conflicts. One of DuplicationBehavior's constants</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a new file as /fal/dir/upload.jpg</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">addFile</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/var/www/html/upload.jpg&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;/fal/dir/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a new file as /fal/dir/file.jpg</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">addFile</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/var/www/html/upload.jpg&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;/fal/dir/file.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="adduploadedfile"><a href="#adduploadedfile" class="header-anchor">#</a> addUploadedFile()</h3> <p>Handles the upload of files and adds them to the FAL storage.</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$uploadFieldName The name of your field in the form. You can specify the form-name/namespace by prepending it like:
namespace.fieldName</li> <li>$falPath Defines the path where to put the file in the FAL file system. Nonexisting directories will auto-created, the default file storage is 1(fileadmin).
If the falPath ends with a slash &quot;/&quot;, the filename will be taken from $fileSystemPath. If the falPath NOT ends with a slash, the filename is extracted from it</li> <li>$options An array of possible options
<ul><li>duplicationBehavior string (&quot;replace&quot;): Changes the way how duplicated files are handled. One of DuplicationBehavior's constants</li> <li>allowedExtensions string|array: A comma separated list, or an array of allowed file extensions. If empty
$GLOBALS['TYPO3_CONF_VARS']['BE']['fileExtensions']['allow']
is used instead. Use &quot;*&quot; to allow all file types</li> <li>deniedExtensions string|array: A comma separated list of denied file extensions. If empty $GLOBALS['TYPO3_CONF_VARS']['BE']['fileExtensions']['deny']
is tried instead. This will always override allowedExtensions! So you can do a wildcard for all allowed files and specify what files you don't want if you
would like</li> <li>maxFileSize: An integer value of bytes which define the max fileSize of the uploaded file. 0 means no limit.
:::</li></ul></li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Resource<span class="token punctuation">\</span>DuplicationBehavior</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Upload a file that has the name $_POST[&quot;newDocument&quot;]</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">addUploadedFile</span><span class="token punctuation">(</span>
    <span class="token string double-quoted-string">&quot;newDocument&quot;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'1:/your/directory/'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'allowedExtensions'</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'doc,pdf,zip,rar,docx'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'maxFileSize'</span>         <span class="token operator">=&gt;</span> <span class="token number">8e+6</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'duplicationBehavior'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">DuplicationBehavior</span><span class="token operator">::</span><span class="token constant">RENAME</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="getfileinfo"><a href="#getfileinfo" class="header-anchor">#</a> getFileInfo()</h3> <p>Returns an object containing information for a given file, like it's size, URL, mime type, and similar options. Image and video files also contain additional
metadata like dimensions, description and platform video id's</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$file Can either be the instance of a file or anything that is valid as a $uid when using getFile()</li></ul></details></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get file information for a file with uid 12</span>
<span class="token variable">$info</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFileInfo</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$info</span><span class="token operator">-&gt;</span><span class="token function">isFileReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// FALSE</span>

<span class="token comment">// Get file info for a file reference on tt_content media</span>
<span class="token variable">$ref</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;tt_content&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$info</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFileInfo</span><span class="token punctuation">(</span><span class="token variable">$ref</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$info</span><span class="token operator">-&gt;</span><span class="token function">isFileReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TRUE</span>
<span class="token variable">$info</span><span class="token operator">-&gt;</span><span class="token function">isImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TRUE (or FALSE, depending on your file :D)</span>
</span></code></pre></div><h3 id="getfileurl"><a href="#getfileurl" class="header-anchor">#</a> getFileUrl()</h3> <p>Returns the url of a given file object</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$file Can either be the instance of a file or anything valid as a $uid when using getFile()</li> <li>$withHash By default, all URLs have a cache buster hash attached. Set this to false if you don't want a cache buster</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;tt_content&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFileUrl</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://example.org/fileadmin/media.jpg?hash=xxxxxxxxxxxx</span>
</span></code></pre></div><h3 id="getresizedimage"><a href="#getresizedimage" class="header-anchor">#</a> getResizedImage()</h3> <p>This method is used to apply resizing and cropping definitions to an image file. The result will be a processed file.</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$file Can either be the instance of a file or anything that is valid as a $uid when using getFile()</li> <li>$options The resizing options to apply when the image is generated
<ul><li>width int|string: see *1</li> <li>height int|string: see *1</li> <li>minWidth int The minimal width of the image in pixels</li> <li>minHeight int The minimal height of the image in pixels</li> <li>maxWidth int The maximal width of the image in pixels</li> <li>maxHeight int The maximal height of the image in pixels</li> <li>crop bool|string|array: True if the image should be cropped instead of stretched Can also be the name of a cropVariant that should be rendered Can be an
array with (x,y,width,height) keys to provide a custom crop mask</li> <li>params string: Additional command line parameters for imagick see: https://imagemagick.org/script/command-line-options.php</li></ul></li></ul> <p>*1: A numeric value, can also be a simple calculation. For further details take a look
at <a href="https://docs.typo3.org/m/typo3/reference-typoscript/8.7/en-us/Functions/Imgresource/Index.html" target="_blank" rel="noopener noreferrer">imageResource.width<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Resize the given image to a width of 250px</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;tt_content&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$resized</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getResizedImage</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string double-quoted-string">&quot;width&quot;</span> <span class="token operator">=&gt;</span> <span class="token number">250</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="getresizedimageurl"><a href="#getresizedimageurl" class="header-anchor">#</a> getResizedImageUrl()</h3> <p>Similar to getFileUrl() but is designed to resize and crop images on the fly. Note: If the image is not found, or the editing failed the original URL of the
file is returned!</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$file Can either be the instance of a file or anything valid as a $uid when using getFile()</li> <li>$options The resizing options to apply when the image is generated
<ul><li>width int|string: see *1</li> <li>height int|string: see *1</li> <li>minWidth int|string: see *1</li> <li>minHeight int|string: see *1</li> <li>maxWidth int|string: see *1</li> <li>maxHeight int|string: see *1</li> <li>crop bool|string (FALSE): True if the image should be cropped instead of stretched Can also be the name of a cropVariant that should be rendered</li></ul></li></ul> <p>*1: A numeric value, can end a &quot;c&quot; to crop the image to the target width</p></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Resize the given image to a width of 250px</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;tt_content&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;media&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getResizedImageUrl</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string double-quoted-string">&quot;width&quot;</span> <span class="token operator">=&gt;</span> <span class="token number">250</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://example.org/fileadmin/_processed_/xxxx.jpg?hash=xxxxxxxxxxxx</span>
</span></code></pre></div><h3 id="hasfolder"><a href="#hasfolder" class="header-anchor">#</a> hasFolder()</h3> <p>Checks if a certain fal folder exists or not.</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$falPath Something like /myFolder/mySubFolder, 1:/myFolder, 2</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Check if a folder exists in mount 1 (fileadmin)</span>
<span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">hasFolder</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/myFolder/mySubFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Check if a folder exists in mount 2</span>
<span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">hasFolder</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;2:/myFolder/mySubFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="getfolder"><a href="#getfolder" class="header-anchor">#</a> getFolder()</h3> <p>Retrieves a fal folder object from the storage and returns it. Throws an exception if the folder does not exist!</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$falPath Something like /myFolder/mySubFolder, 1:/myFolder, 2</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Gets a folder instance from mount 1 (fileadmin)</span>
<span class="token variable">$folder</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">getFolder</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/myFolder/mySubFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="mkfolder"><a href="#mkfolder" class="header-anchor">#</a> mkFolder()</h3> <p>Creates a new directory at the given path. This method handles the path recursively. Folders that already exist will simply be ignored.</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$falPath Something like /myFolder/mySubFolder, 1:/myFolder, 2</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>T3ba<span class="token punctuation">\</span>Tool<span class="token punctuation">\</span>Fal<span class="token punctuation">\</span>FalService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Container<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">TYPO3<span class="token punctuation">\</span>CMS<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Utility<span class="token punctuation">\</span>GeneralUtility</span><span class="token punctuation">;</span>

<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name static-context">GeneralUtility</span><span class="token operator">::</span><span class="token function">makeInstance</span><span class="token punctuation">(</span><span class="token class-name static-context">ContainerInterface</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$falService</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name static-context">FalService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Make a folder instance on mount 1 (fileadmin)</span>
<span class="token variable">$folder</span> <span class="token operator">=</span> <span class="token variable">$falService</span><span class="token operator">-&gt;</span><span class="token function">mkFolder</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/myFolder/mySubFolder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="file-info"><a href="#file-info" class="header-anchor">#</a> File Info</h2> <p><code>LaborDigital\Typo3BetterApi\FileAndFolder\FileInfo\FileInfo</code></p> <p>A unified file information repository for files, file references, and processed files. You can create a new instance of this class by
using <a href="#getfileinfo">FalFileService::getFileInfo()</a>.</p> <h3 id="isfilereference"><a href="#isfilereference" class="header-anchor">#</a> isFileReference()</h3> <p>Returns true if the file is handled as a &quot;sys-file-reference&quot; object</p> <h3 id="isprocessed"><a href="#isprocessed" class="header-anchor">#</a> isProcessed()</h3> <p>Returns true if the handled file is a processed file instance</p> <h3 id="getuid"><a href="#getuid" class="header-anchor">#</a> getUid()</h3> <p>Returns the unique id of either the file reference or the file</p> <h3 id="getfilereferenceuid"><a href="#getfilereferenceuid" class="header-anchor">#</a> getFileReferenceUid()</h3> <p>Returns either the uid of the handled file reference or null if the file is not a file reference</p> <h3 id="getfileuid"><a href="#getfileuid" class="header-anchor">#</a> getFileUid()</h3> <p>Returns the uid if the low level file object</p> <h3 id="gethash"><a href="#gethash" class="header-anchor">#</a> getHash()</h3> <p>Returns a cache buster string for the file</p> <h3 id="getfilename"><a href="#getfilename" class="header-anchor">#</a> getFileName()</h3> <p>Returns the base name of the current file name</p> <h3 id="geturl"><a href="#geturl" class="header-anchor">#</a> getUrl()</h3> <p>Returns the URL of the file handled as absolute URL</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$withHash Set this to false to disable the cache buster hash that will be added to the file URL</li></ul></details> <h3 id="getoriginalurl"><a href="#getoriginalurl" class="header-anchor">#</a> getOriginalUrl()</h3> <p>Similar to getUrl() but always returns the default URL even if the current file is a processed file instance</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$withHash Set this to false to disable the cache buster hash that will be added to the file URL</li></ul></details> <h3 id="getmimetype"><a href="#getmimetype" class="header-anchor">#</a> getMimeType()</h3> <p>Returns the mime type of the file</p> <h3 id="getsize"><a href="#getsize" class="header-anchor">#</a> getSize()</h3> <p>Returns the size of the handled file in bytes</p> <h3 id="getextension"><a href="#getextension" class="header-anchor">#</a> getExtension()</h3> <p>Returns the file extension of the handled file</p> <h3 id="gettype"><a href="#gettype" class="header-anchor">#</a> getType()</h3> <p>Returns the file type as they are defined in the File::FILETYPE_ constants</p> <h3 id="isimage"><a href="#isimage" class="header-anchor">#</a> isImage()</h3> <p>Returns true if the handled file is an image</p> <h3 id="isvideo"><a href="#isvideo" class="header-anchor">#</a> isVideo()</h3> <p>Returns the raw file instance this information object represents</p> <h3 id="getfilereference-2"><a href="#getfilereference-2" class="header-anchor">#</a> getFileReference()</h3> <p>Returns either the currently linked file reference or null if there is none</p> <h3 id="getprocessedfile"><a href="#getprocessedfile" class="header-anchor">#</a> getProcessedFile()</h3> <p>Returns either the processed file object or null if the file was not processed</p> <h3 id="getvideoinfo"><a href="#getvideoinfo" class="header-anchor">#</a> getVideoInfo()</h3> <p>Returns either additional information if this file is a video or null if this file is not a video</p> <h3 id="getimageinfo"><a href="#getimageinfo" class="header-anchor">#</a> getImageInfo()</h3> <p>Returns either additional information if this file is an image or null if this file is not an image</p> <h2 id="varfs"><a href="#varfs" class="header-anchor">#</a> VarFs</h2> <p><code>LaborDigital\Typo3BetterApi\FileAndFolder\VarFs\VarFs</code></p> <p>In earlier versions I used the caching framework extensively to store dynamically generated content. However it is no longer allowed to create caches while the
ext_localconf and tca files are generated. Therefore all data, which is dynamically generated by this extension is now stored in a separate temporary director</p> <p>The VarFs class is part of the public API and can be used to store your own dynamically generated files.</p> <div class="custom-block warning"><p class="custom-block-title">It's called &gt;**TEMP** /var/t3ba/ directory will be cleared!</p></div> <p>Create a new instance by passing a unique sub directory that will be created inside /var/t3ba:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>VarFs<span class="token punctuation">\</span>VarFs</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VarFs</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;subDir/in/var/temp/fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="hasfile"><a href="#hasfile" class="header-anchor">#</a> hasFile()</h3> <p>Returns true if a file exists, false if not</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$filePath The name / relative path of the file to check</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>VarFs<span class="token punctuation">\</span>VarFs</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VarFs</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;subDir/in/var/temp/fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">hasFile</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// True if file exists, false if not</span>
</span></code></pre></div><h3 id="getfile-2"><a href="#getfile-2" class="header-anchor">#</a> getFile()</h3> <p>Returns the file object for the required file path</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$filePath The name / relative path of the file to retrieve</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>VarFs<span class="token punctuation">\</span>VarFs</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VarFs</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;subDir/in/var/temp/fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SplFileInfo object if the file exists on the disk</span>
</span></code></pre></div><h3 id="getfilecontent"><a href="#getfilecontent" class="header-anchor">#</a> getFileContent()</h3> <p>Returns the content of a required file. It will automatically unpack serialized values back into their PHP values</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$filePath The name / relative path of the file to read</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>VarFs<span class="token punctuation">\</span>VarFs</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VarFs</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;subDir/in/var/temp/fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">getFileContent</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="setfilecontent"><a href="#setfilecontent" class="header-anchor">#</a> setFileContent()</h3> <p>Is used to dump some content into a file. Automatically serializes non-string/numeric content before writing it as a file</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$filePath The name / relative path of the file to dump the content to</li> <li>$content Either a string (will be dumped as string) or anything else (will be dumped as serialized value)</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>VarFs<span class="token punctuation">\</span>VarFs</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VarFs</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;subDir/in/var/temp/fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Writes a file with a given string content</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">setFileContent</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;test.txt&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;my content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Writes a file with the serialized string of your array</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">setFileContent</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;test.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;myKey&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;my content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h3 id="includefile"><a href="#includefile" class="header-anchor">#</a> includeFile()</h3> <p>Includes a file as a PHP resource</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$filePath The name of the file to include</li> <li>$once by default we include the file with include_once, if you set this to FALSE the plain include is used instead.</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>VarFs<span class="token punctuation">\</span>VarFs</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VarFs</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;subDir/in/var/temp/fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Writes a dynamic php file to the file system and includes it</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">setFileContent</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;myPhp.php&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;&lt;?php echo \&quot;hello world\&quot;;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$fs</span><span class="token operator">-&gt;</span><span class="token function">includeFile</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;myPhp.php&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints: hello world</span>
</span></code></pre></div><h3 id="getbasedirectorypath"><a href="#getbasedirectorypath" class="header-anchor">#</a> getBaseDirectoryPath()</h3> <p>Returns the configured base directory, either as absolute, or as relative path (relative to the t3ba root directory)</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$relative Set this to true if you want to retrieve the relative path based on the T3ba extension. Useful for compiling typoscript or flexform files</li></ul></details> <h3 id="flush"><a href="#flush" class="header-anchor">#</a> flush()</h3> <p>Completely removes the whole directory and all files in it</p> <h2 id="permissions"><a href="#permissions" class="header-anchor">#</a> Permissions</h2> <p><code>LaborDigital\Typo3BetterApi\FileAndFolder\Permissions</code></p> <h3 id="setfilepermissions"><a href="#setfilepermissions" class="header-anchor">#</a> setFilePermissions()</h3> <p>This helper works quite similar like GeneralUtility::fixPermissions() but without depending on the existence of the PATH_site constant. This method is built to
handle errors silently. The result of the method shows if there was an error (FALSE) or not (TRUE)</p> <details class="custom-block details"><summary>Arguments</summary> <ul><li>$filename The absolute path of the file to set the permissions for</li> <li>$mode Optionally set a permission set like 0644 -&gt; Make sure to use strings</li> <li>$group Optionally set a group to set, otherwise the parent folder&quot;s group will be used.</li></ul></details> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">LaborDigital<span class="token punctuation">\</span>Typo3BetterApi<span class="token punctuation">\</span>FileAndFolder<span class="token punctuation">\</span>FilePermissionUtil</span><span class="token punctuation">;</span>

<span class="token comment">// Sets the UNIX permissions of a file to 777.</span>
<span class="token class-name static-context">FilePermissionUtil</span><span class="token operator">::</span><span class="token function">setFilePermissions</span> <span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/absolute/file/path.txt&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;0777&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/" class="prev router-link-active">
        TYPO3 - Better API
      </a></span> <span class="next"><a href="/guide/CoreModification.html">
        Core Modification
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8f41657d.js" defer></script><script src="/assets/js/2.d8f93aa7.js" defer></script><script src="/assets/js/9.99f5edda.js" defer></script>
  </body>
</html>
